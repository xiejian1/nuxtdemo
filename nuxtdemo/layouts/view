<template>
	<div class="view" :style="`background-image:url($websiteInfo.bgUrl||'')`">
		<app-header class="app-header" :website-info="websiteInfo"></app-header>
		<div  class="app-content">
			<nuxt></nuxt>
		</div>
		<app-footer class="app-footer" :unit="websiteInfo.unitRespVOList" :friendLinks="websiteInfo.friendLinkVOList"></app-footer>
	</div>
</template>
<script type="text/javascript">
	import AppHeader from '../components/AppHeader.vue'
	import AppFooter from '../components/AppFooter.vue'
	export default{
		data() {
			return{
               websiteInfo:{
               	unitRespVOList:[],
               	friendLinks:[],
               },
			}
		},
		methods:{
			async fetchWebsiteInfo(){
				const result = await this.$http.get('/api/websiteInfo')
				if (result.data.code>=200&&result.data.code<300) {
					this.websiteInfo = result.data.data
				}else{
					this.$message.error(result.data.msg)
				}
			},
		},
		created(){
			this.fetchWebsiteInfo()
		},
		mounted(){
			console.log('@xiejian\t <https://github.com/xiejian1>')
		},
		components:{
			AppHeader,
			AppFooter
		}
	}
</script>
<style type="text/css">
	.view{
		height: auto;
		width: 100%;
		min-height: 100%;
		background-size: cover;
		background-attachment: fixed;
		background-repeat: no-repeat;
	}
	.app-header{
		background-color: rgba(255,255,255,0.5)
	}
</style>